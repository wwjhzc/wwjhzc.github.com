webpackJsonp([18],{GjEY:function(e,i){},mQdz:function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("span",{staticClass:"tree-expand"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.DATA.isEdit,expression:"DATA.isEdit"}],staticClass:"tree-label"},[n("el-input",{ref:"treeInput"+e.DATA.id,staticClass:"edit",attrs:{size:"mini",autofocus:""},on:{blur:function(i){i.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},nativeOn:{click:function(i){return i.stopPropagation(),e.nodeEditFocus(i)},keyup:function(i){if(!("button"in i)&&e._k(i.keyCode,"enter",13,i.key,"Enter"))return null;i.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},model:{value:e.DATA.name,callback:function(i){e.$set(e.DATA,"name",i)},expression:"DATA.name"}})],1),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],class:[e.DATA.id>e.maxexpandId?"tree-new tree-label":"tree-label"]},[n("span",[e._v(e._s(e.DATA.name))])]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],staticClass:"tree-btn"},[n("i",{staticClass:"el-icon-plus",on:{click:function(i){i.stopPropagation(),e.nodeAdd(e.STORE,e.DATA,e.NODE)}}}),e._v(" "),n("i",{staticClass:"el-icon-edit",on:{click:function(i){i.stopPropagation(),e.nodeEdit(e.STORE,e.DATA,e.NODE)}}}),e._v(" "),n("i",{staticClass:"el-icon-delete",on:{click:function(i){i.stopPropagation(),e.nodeDel(e.STORE,e.DATA,e.NODE)}}})])])},staticRenderFns:[]};var r=n("VU/8")({name:"nx-tree-render",props:["NODE","DATA","STORE","maxexpandId"],methods:{nodeAdd:function(e,i,n){this.$emit("nodeAdd",e,i,n)},nodeEdit:function(e,i,n){var d=this;i.isEdit=!0,this.$nextTick(function(){d.$refs["treeInput"+i.id].$refs.input.focus()}),this.$emit("nodeEdit",e,i,n)},nodeDel:function(e,i,n){this.$emit("nodeDel",e,i,n)},nodeEditPass:function(e,i,n){i.isEdit=!1},nodeEditFocus:function(){}}},d,!1,function(e){n("rmaZ")},null,null).exports,t={maxexpandId:95,treelist:[{id:1,name:"北京市",ProSort:1,remark:"直辖市",pid:"",isEdit:!1,children:[{id:35,name:"朝阳区",pid:1,remark:"",isEdit:!1,children:[]},{id:36,name:"海淀区",pid:1,remark:"",isEdit:!1,children:[]},{id:37,name:"房山区",pid:1,remark:"",isEdit:!1,children:[]},{id:38,name:"丰台区",pid:1,remark:"",isEdit:!1,children:[]},{id:39,name:"昌平区",pid:1,remark:"",isEdit:!1,children:[]},{id:40,name:"大兴区",pid:1,remark:"",isEdit:!1,children:[]}]},{id:2,name:"天津市",ProSort:2,remark:"直辖市",pid:"",isEdit:!1,children:[{id:41,name:"北辰区",pid:2,remark:"",isEdit:!1,children:[]},{id:42,name:"河北区",pid:2,remark:"",isEdit:!1,children:[]},{id:43,name:"西青区",pid:2,remark:"",isEdit:!1,children:[]},{id:44,name:"东丽区",pid:2,remark:"",isEdit:!1,children:[]}]},{id:3,name:"河北省",ProSort:5,remark:"省份",pid:"",isEdit:!1,children:[{id:45,name:"衡水市",pid:3,remark:"",isEdit:!1,children:[]},{id:46,name:"张家口市",pid:3,remark:"",isEdit:!1,children:[]},{id:47,name:"秦皇岛市",pid:3,remark:"",isEdit:!1,children:[]},{id:48,name:"承德市",pid:3,remark:"",isEdit:!1,children:[]},{id:49,name:"邯郸市",pid:3,remark:"",isEdit:!1,children:[]}]},{id:4,name:"山西省",ProSort:6,remark:"省份",pid:"",isEdit:!1,children:[{id:50,name:"大同市",pid:4,remark:"",isEdit:!1,children:[]}]},{id:5,name:"内蒙古自治区",ProSort:32,remark:"自治区",pid:"",isEdit:!1,children:[{id:51,name:"包头市",pid:5,remark:"",isEdit:!1,children:[]}]},{id:6,name:"辽宁省",ProSort:8,remark:"省份",pid:"",isEdit:!1,children:[{id:52,name:"大连市",pid:6,remark:"",isEdit:!1,children:[]},{id:53,name:"太原市",pid:6,remark:"",isEdit:!1,children:[]}]},{id:20,name:"海南省",ProSort:24,remark:"省份",pid:"",isEdit:!1,children:[{id:68,name:"海口市",pid:20,remark:"",isEdit:!1,children:[]}]},{id:21,name:"广西壮族自治区",ProSort:28,remark:"自治区",pid:"",isEdit:!1,children:[{id:69,name:"玉林市",pid:21,remark:"",isEdit:!1,children:[]},{id:86,name:"贺州市",pid:21,remark:"",isEdit:!1,children:[]}]},{id:22,name:"甘肃省",ProSort:21,remark:"省份",pid:"",isEdit:!1,children:[{id:70,name:"兰州市",pid:22,remark:"",isEdit:!1,children:[]}]},{id:23,name:"陕西省",ProSort:27,remark:"省份",pid:"",isEdit:!1,children:[{id:71,name:"咸阳市",pid:23,remark:"",isEdit:!1,children:[]},{id:87,name:"安康市",pid:23,remark:"",isEdit:!1,children:[]}]},{id:24,name:"新疆维吾尔自治区",ProSort:31,remark:"自治区",pid:"",isEdit:!1,children:[{id:72,name:"乌鲁木齐市",pid:24,remark:"",isEdit:!1,children:[]},{id:88,name:"和田地区",pid:24,remark:"",isEdit:!1,children:[]},{id:89,name:"阿勒泰州",pid:24,remark:"",isEdit:!1,children:[]}]},{id:25,name:"青海省",ProSort:26,remark:"省份",pid:"",isEdit:!1,children:[{id:73,name:"黄南藏族自治州",pid:25,remark:"",isEdit:!1,children:[]}]},{id:26,name:"宁夏回族自治区",ProSort:30,remark:"自治区",pid:"",isEdit:!1,children:[{id:74,name:"银川市",pid:26,remark:"",isEdit:!1,children:[]}]}]},a={name:"tree",data:function(){return{maxexpandId:t.maxexpandId,non_maxexpandId:t.maxexpandId,isLoadingTree:!1,setTree:t.treelist,defaultProps:{children:"children",label:"name"},defaultExpandKeys:[]}},mounted:function(){console.log(t),this.initExpand()},methods:{initExpand:function(){var e=this;this.setTree.map(function(i){e.defaultExpandKeys.push(i.id)}),this.isLoadingTree=!0},handleNodeClick:function(e,i,n){e.isEdit=!1},renderContent:function(e,i){var n=i.node,d=i.data,t=i.store,a=this;return e(r,{props:{DATA:d,NODE:n,STORE:t,maxexpandId:a.non_maxexpandId},on:{nodeAdd:function(e,i,n){return a.handleAdd(e,i,n)},nodeEdit:function(e,i,n){return a.handleEdit(e,i,n)},nodeDel:function(e,i,n){return a.handleDelete(e,i,n)}}})},handleAddTop:function(){this.setTree.push({id:++this.maxexpandId,name:"新增节点",pid:"",isEdit:!1,children:[]})},handleAdd:function(e,i,n){if(n.level>=6)return this.$message.error("最多只支持五级！"),!1;i.children.push({id:++this.maxexpandId,name:"新增节点",pid:i.id,isEdit:!1,children:[]}),n.expanded||(n.expanded=!0)},handleEdit:function(e,i,n){console.log(e,i,n)},handleDelete:function(e,i,n){var d=this;console.log(e,i,n);var r=this;if(i.children&&0!==i.children.length)return this.$message.error("此节点有子级，不可删除！"),!1;var t=function(){var e=n.parent.data.children||n.parent.data,r=99999;e.map(function(e,n){i.id===e.id&&(r=n)});var t=e.splice(r,1);console.log(r,t),d.$message.success("删除成功！")};i.id>this.non_maxexpandId?t():r.$confirm("是否删除此节点？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t()}).catch(function(){return!1})}}},s={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"expand"},[e._m(0),e._v(" "),n("div",[n("el-button",{on:{click:e.handleAddTop}},[e._v("添加顶级节点")]),e._v(" "),e.isLoadingTree?n("el-tree",{ref:"expandMenuList",staticClass:"expand-tree",attrs:{data:e.setTree,"node-key":"id","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}}):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("p",{staticClass:"warn-content"},[i("a",{attrs:{href:"https://xiaoniezi.github.io/2017-10-16/vue-ElementUI-tree-expand/",target:""}},[this._v("Tree组件参考tree")])])}]};var o=n("VU/8")(a,s,!1,function(e){n("GjEY")},null,null);i.default=o.exports},rmaZ:function(e,i){}});
//# sourceMappingURL=18.45f6f80dcbf7ca0c2f0b.js.map